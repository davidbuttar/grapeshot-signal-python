<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tutorial &#8212; Grapeshot Signal SDK 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="Grapeshot Signal SDK 0.1 documentation" href="index.html" />
    <link rel="next" title="grapeshot_signal" href="modules.html" />
    <link rel="prev" title="Quick Start" href="quickstart.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<div class="section" id="obtaining-the-sdk">
<h2>Obtaining the SDK.<a class="headerlink" href="#obtaining-the-sdk" title="Permalink to this headline">¶</a></h2>
<div class="section" id="installation-with-pip">
<h3>Installation with pip<a class="headerlink" href="#installation-with-pip" title="Permalink to this headline">¶</a></h3>
<p>From pre-packaged sources:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">grapeshot</span><span class="o">-</span><span class="n">signal</span><span class="o">-</span><span class="n">sdk</span>
</pre></div>
</div>
<p>From github, e.g.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">git</span><span class="o">+</span><span class="n">git</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">grapeshot</span><span class="o">/</span><span class="n">grapeshot</span><span class="o">-</span><span class="n">signal</span><span class="o">-</span><span class="n">python</span><span class="o">.</span><span class="n">git</span><span class="nd">@master</span>
</pre></div>
</div>
<p>We recommend using a <a class="reference external" href="https://docs.python.org/3/library/venv.html">virtual environment</a>.</p>
</div>
<div class="section" id="checkout-with-git">
<h3>Checkout with git<a class="headerlink" href="#checkout-with-git" title="Permalink to this headline">¶</a></h3>
<p>Using pip will install the sdk itself. The sources for this documentation and
some example client code are not included with the packaged distribution. Use
git to obtain a complete copy of the repository</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">grapeshot</span><span class="o">/</span><span class="n">grapeshot</span><span class="o">-</span><span class="n">signal</span><span class="o">-</span><span class="n">python</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
</div>
<div class="section" id="download">
<h3>Download<a class="headerlink" href="#download" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>A complete copy of the sdk sources can be download from github, e.g ::</dt>
<dd>wget <a class="reference external" href="https://github.com/grapeshot/grapeshot-signal-python/archive/master.zip">https://github.com/grapeshot/grapeshot-signal-python/archive/master.zip</a></dd>
</dl>
</div>
</div>
<div class="section" id="check-import">
<h2>Check Import<a class="headerlink" href="#check-import" title="Permalink to this headline">¶</a></h2>
<p>Verify your installation:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>(gs-sdk) [paul@localhost grapeshot-signal-python]$ python
Python 3.5.1 (default, Sep 19 2016, 10:16:17)
[GCC 6.1.1 20160621 (Red Hat 6.1.1-3)] on linux
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; import grapeshot_signal
&gt;&gt;&gt;
</pre></div>
</div>
<p>An import error:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">grapeshot_signal</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">ImportError</span>: <span class="n">No module named grapeshot_signal</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>indicates a problem with installation, which should be resolved before proceeding.</p>
</div>
<div class="section" id="obtain-an-api-key">
<h2>Obtain an API key<a class="headerlink" href="#obtain-an-api-key" title="Permalink to this headline">¶</a></h2>
<p>Create an account at the <a class="reference external" href="https://api-portal.grapeshot.com/">Developer Portal</a> and obtain an API key. Every
account has an associated monthly quota. The free tier enables development and
experimentation without incurring any cost. Paid subscriptions provide higher
monthly quotas. Therefore you should take care with your API keys, since any
use of your API keys counts against your monthly quota.</p>
</div>
<div class="section" id="use-a-signalclient-instance">
<h2>Use a <a class="reference internal" href="grapeshot_signal.html#grapeshot_signal.client.SignalClient" title="grapeshot_signal.client.SignalClient"><code class="xref py py-class docutils literal"><span class="pre">SignalClient</span></code></a> instance<a class="headerlink" href="#use-a-signalclient-instance" title="Permalink to this headline">¶</a></h2>
<p>Optionally create a file config_local.py somewhere on your python load
path.</p>
<div class="literal-block-wrapper container" id="id2">
<div class="code-block-caption"><span class="caption-text">config_local.py</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">api_host</span> <span class="o">=</span> <span class="s2">&quot;signal-api.grapeshot.com&quot;</span>
<span class="n">api_key</span> <span class="o">=</span> <span class="s2">&quot;gs_12QXB5VRbi2d5GimFX846AY-SdXF0gqnFwBAPQYpl9axzYVJYsxxx&quot;</span>
</pre></div>
</div>
</div>
<p>You should replace the key with your own API key. This step can be skipped, but
provides convenient access to your API key.</p>
<p>Then create a <a class="reference internal" href="grapeshot_signal.html#grapeshot_signal.client.SignalClient" title="grapeshot_signal.client.SignalClient"><code class="xref py py-class docutils literal"><span class="pre">SignalClient</span></code></a> instance and use it obtain information about a web page:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">grapeshot_signal</span> <span class="k">import</span> <span class="n">SignalClient</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">rels</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">client</span> <span class="o">=</span> <span class="n">SignalClient</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">api_key</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">page_model</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span><span class="s2">&quot;http://www.bbc.co.uk/sport/cycling/37691574&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">rels</span><span class="o">.</span><span class="n">keywords</span><span class="p">,</span> <span class="n">rels</span><span class="o">.</span><span class="n">segments</span><span class="p">])</span> <span class="c1"># try any web page here</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">page_model</span><span class="o">.</span><span class="n">is_ok</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#errors"><span class="std std-ref">Errors</span></a> below if <a class="reference internal" href="grapeshot_signal.html#grapeshot_signal.model.SignalModel.is_ok" title="grapeshot_signal.model.SignalModel.is_ok"><code class="xref py py-meth docutils literal"><span class="pre">is_ok()</span></code></a> returns <code class="docutils literal"><span class="pre">False</span></code>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kw_model</span> <span class="o">=</span> <span class="n">page_model</span><span class="o">.</span><span class="n">get_embedded</span><span class="p">(</span><span class="n">rels</span><span class="o">.</span><span class="n">keywords</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Note that this is itself a <a class="reference internal" href="grapeshot_signal.html#grapeshot_signal.model.SignalModel" title="grapeshot_signal.model.SignalModel"><code class="xref py py-class docutils literal"><span class="pre">SignalModel</span></code></a> instance. In this case it has a <code class="docutils literal"><span class="pre">'keywords'</span></code> property:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="k">import</span> <span class="n">pprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">kw_model</span><span class="p">[</span><span class="s1">&#39;keywords&#39;</span><span class="p">])</span>
<span class="go">[{&#39;name&#39;: &#39;Bradley Wiggins&#39;, &#39;score&#39;: 2.154},</span>
<span class="go">{&#39;name&#39;: &#39;Chris Froome&#39;, &#39;score&#39;: 2.154},</span>
<span class="go">{&#39;name&#39;: &#39;Sport&#39;, &#39;score&#39;: 2.071},</span>
<span class="go">{&#39;name&#39;: &quot;cycling&#39;s&quot;, &#39;score&#39;: 1.466},</span>
<span class="go">{&#39;name&#39;: &#39;Team Sky&#39;, &#39;score&#39;: 1.466},</span>
<span class="go">{&#39;name&#39;: &#39;Tour de France&#39;, &#39;score&#39;: 1.466},</span>
<span class="go">{&#39;name&#39;: &#39;allergies&#39;, &#39;score&#39;: 1.167},</span>
<span class="go">{&#39;name&#39;: &#39;steroid&#39;, &#39;score&#39;: 1.167},</span>
<span class="go">{&#39;name&#39;: &#39;treatment&#39;, &#39;score&#39;: 1.167},</span>
<span class="go">{&#39;name&#39;: &#39;asthma&#39;, &#39;score&#39;: 0.725},</span>
<span class="go">{&#39;name&#39;: &#39;athletes&#39;, &#39;score&#39;: 0.725},</span>
<span class="go">{&#39;name&#39;: &#39;banned substances&#39;, &#39;score&#39;: 0.725},</span>
<span class="go">{&#39;name&#39;: &#39;Dave Brailsford&#39;, &#39;score&#39;: 0.725},</span>
<span class="go">{&#39;name&#39;: &quot;Giro d&#39;Italia&quot;, &#39;score&#39;: 0.725},</span>
<span class="go">{&#39;name&#39;: &#39;Mark Cavendish&#39;, &#39;score&#39;: 0.725},</span>
<span class="go">{&#39;name&#39;: &#39;medical&#39;, &#39;score&#39;: 0.725},</span>
<span class="go">{&#39;name&#39;: &#39;Olympian&#39;, &#39;score&#39;: 0.725},</span>
<span class="go">{&#39;name&#39;: &#39;respiratory&#39;, &#39;score&#39;: 0.725},</span>
<span class="go">{&#39;name&#39;: &#39;Rio Olympics&#39;, &#39;score&#39;: 0.725},</span>
<span class="go">{&#39;name&#39;: &#39;symptoms&#39;, &#39;score&#39;: 0.725},</span>
<span class="go">{&#39;name&#39;: &#39;therapeutic&#39;, &#39;score&#39;: 0.725},</span>
<span class="go">{&#39;name&#39;: &#39;UCI&#39;, &#39;score&#39;: 0.725}]</span>
</pre></div>
</div>
<p>Note that:</p>
<ol class="arabic simple">
<li>The scores associated with each keyword are a measure of the relative
importance of each keyword within the page, but are not necessarily
comparable with scores obtained from different pages.</li>
<li>keywords can be short phrases (as in the above example).</li>
</ol>
<p>The segments for the model are also available:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">page_model</span><span class="o">.</span><span class="n">get_embedded</span><span class="p">(</span><span class="n">rels</span><span class="o">.</span><span class="n">segments</span><span class="p">)[</span><span class="s1">&#39;segments&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<span class="go">{&#39;matchterms&#39;: [{&#39;name&#39;: &#39;Bradley Wiggins&#39;, &#39;score&#39;: 2.154},</span>
<span class="go">                {&#39;name&#39;: &#39;Chris Froome&#39;, &#39;score&#39;: 2.154},</span>
<span class="go">                {&#39;name&#39;: &#39;Sport&#39;, &#39;score&#39;: 2.071},</span>
<span class="go">                {&#39;name&#39;: &quot;cycling&#39;s&quot;, &#39;score&#39;: 1.466},</span>
<span class="go">                {&#39;name&#39;: &#39;Team Sky&#39;, &#39;score&#39;: 1.466},</span>
<span class="go">                {&#39;name&#39;: &#39;Tour de France&#39;, &#39;score&#39;: 1.466},</span>
<span class="go">                {&#39;name&#39;: &#39;athletes&#39;, &#39;score&#39;: 0.725},</span>
<span class="go">                {&#39;name&#39;: &#39;Dave Brailsford&#39;, &#39;score&#39;: 0.725},</span>
<span class="go">                {&#39;name&#39;: &quot;Giro d&#39;Italia&quot;, &#39;score&#39;: 0.725},</span>
<span class="go">                {&#39;name&#39;: &#39;Mark Cavendish&#39;, &#39;score&#39;: 0.725},</span>
<span class="go">                {&#39;name&#39;: &#39;Olympics&#39;, &#39;score&#39;: 0.725},</span>
<span class="go">                {&#39;name&#39;: &#39;UCI&#39;, &#39;score&#39;: 0.725}],</span>
<span class="go">&#39;name&#39;: &#39;gs_sport&#39;,</span>
<span class="go">&#39;score&#39;: 48.262}</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>The segments each have a name. A brief description for each is here:
<a class="reference external" href="https://api-portal.grapeshot.com/documentation/segment_descriptions">https://api-portal.grapeshot.com/documentation/segment_descriptions</a>. The
value for the <code class="docutils literal"><span class="pre">'matchterms'</span></code> key gives the keywords that contributed towards
the categorisation of the page with this segment.</p>
</div>
<div class="section" id="errors">
<span id="id1"></span><h2>Errors<a class="headerlink" href="#errors" title="Permalink to this headline">¶</a></h2>
<p>In some circumstances <a class="reference internal" href="grapeshot_signal.html#grapeshot_signal.model.SignalModel.is_ok" title="grapeshot_signal.model.SignalModel.is_ok"><code class="xref py py-meth docutils literal"><span class="pre">is_ok()</span></code></a> could return <code class="docutils literal"><span class="pre">False</span></code>, for example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">oops_page</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span><span class="s2">&quot;http://grapeshot.com/zzzz&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oops_page</span><span class="o">.</span><span class="n">is_ok</span><span class="p">()</span>
<span class="go">False</span>
</pre></div>
</div>
<p>We can check the page status directly:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">oops_page</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>
<span class="go">&#39;queued&#39;</span>
</pre></div>
</div>
<p>A status of <cite>queued</cite> means that this page has not (recently) been crawled. The
act of requesting information about the page will ensure that it is crawled
soon. So requesting information again gives a different result (if the page has
been crawled):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">oops_page</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span><span class="s2">&quot;http://grapeshot.com/zzzz&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oops_page</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>
<span class="go">&#39;error&#39;</span>
</pre></div>
</div>
<p>In these circumstances the model will have a <cite>error_code</cite> and <cite>error_message</cite> keys:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">oops_page</span><span class="p">[</span><span class="s1">&#39;error_message&#39;</span><span class="p">]</span>
<span class="go">&#39;gx_notfound&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oops_page</span><span class="p">[</span><span class="s1">&#39;error_message&#39;</span><span class="p">]</span>
<span class="go">&#39;Grapeshot was unable to analyse this page because the site returned a Not Found (404) error when our crawler tried to visit it.&#39;</span>
</pre></div>
</div>
<p>The codes and associated error messages are documented here: <a class="reference external" href="https://api-portal.grapeshot.com/documentation/error_codes">https://api-portal.grapeshot.com/documentation/error_codes</a>. In this case we&#8217;ve asked for a non-existent page.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Tutorial</a><ul>
<li><a class="reference internal" href="#obtaining-the-sdk">Obtaining the SDK.</a><ul>
<li><a class="reference internal" href="#installation-with-pip">Installation with pip</a></li>
<li><a class="reference internal" href="#checkout-with-git">Checkout with git</a></li>
<li><a class="reference internal" href="#download">Download</a></li>
</ul>
</li>
<li><a class="reference internal" href="#check-import">Check Import</a></li>
<li><a class="reference internal" href="#obtain-an-api-key">Obtain an API key</a></li>
<li><a class="reference internal" href="#use-a-signalclient-instance">Use a <code class="docutils literal"><span class="pre">SignalClient</span></code> instance</a></li>
<li><a class="reference internal" href="#errors">Errors</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="quickstart.html" title="previous chapter">Quick Start</a></li>
      <li>Next: <a href="modules.html" title="next chapter">grapeshot_signal</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/tutorial.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Grapeshot Limited.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.8</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="_sources/tutorial.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>